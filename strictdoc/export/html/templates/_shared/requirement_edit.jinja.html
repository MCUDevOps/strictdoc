{%- if is_new_requirement -%}
  {%- set url="/actions/document/create_requirement" %}
{%- else -%}
  {%- set url="/actions/document/update_requirement" %}
{%- endif -%}

<turbo-frame id="article-{{requirement.node_id}}">

<form action="{{url}}" method="POST">
  {%- if is_new_requirement -%}
    <input type="hidden" id="reference_mid" name="reference_mid" value="{{reference_mid}}" />
    <input type="hidden" id="whereto" name="whereto" value="{{whereto}}" />
  {%- endif -%}
  <input type="hidden" id="requirement_mid" name="requirement_mid" value="{{requirement.node_id}}" />

  <article class="edit-docsection">
    <section data-section="edit-section-title">
      <input type="text" id="requirement_title" name="requirement_title" value="{{ requirement.title }}"/>
    </section>

    {%- if error_object.has_errors("requirement_statement") -%}
      <div style="border: 1px solid red;">
      {%- for error in error_object.get_errors("requirement_statement") -%}
        {{ error }}
      {%- endfor -%}
      </div>
    {%- endif -%}
    <section data-section="edit-section-freetext">
      <textarea id="requirement_statement" name="requirement_statement" style="width:100%; height: 200px;">{{requirement.statement_multiline}}</textarea>
    </section>

    <section>
        <button type="submit">Save</button>
        {%- if is_new_requirement -%}
          <a href="/actions/document/cancel_new_requirement?requirement_mid={{requirement.node_id}}">Cancel</a>
        {%- else -%}
          <a href="/actions/document/cancel_edit_requirement?requirement_mid={{requirement.node_id}}">Cancel</a>
        {%- endif -%}
    </section>
  </article>

</form>

</turbo-frame>
